# Amazon Seller Content Engine

> é¢å‘ Amazon Seller å—ä¼—çš„è‹±æ–‡å†…å®¹çƒ­ç‚¹æŠ“å– & åˆ›æ„ç”Ÿæˆå¼•æ“

---

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

æœ¬ç³»ç»Ÿé¢å‘ **Amazon Seller ç›¸å…³çš„è‹±æ–‡å†…å®¹æ¸ é“**ï¼ˆYouTube è§†é¢‘ã€Reddit å¸–å­ã€è¡Œä¸šåšå®¢ã€Google Trendsï¼‰ï¼Œè‡ªåŠ¨å®Œæˆä»¥ä¸‹é—­ç¯ï¼š

1. **å®šå‘æŠ“å–**è¿‘ä¸€å‘¨çƒ­åº¦å†…å®¹
2. **æ™ºèƒ½ç­›é€‰**ä¸è¯­ä¹‰å»é‡
3. **è¯é¢˜èšç±»**å‘ç°çƒ­ç‚¹æ–¹å‘
4. **AI ç”Ÿæˆ**å®Œæ•´å†…å®¹åˆ›æ„ï¼ˆæ–‡æ¡ˆ / å›¾ç‰‡ Prompt / è§†é¢‘è„šæœ¬ / ç¤¾äº¤å¸–å­ï¼‰

---

## äºŒã€ç³»ç»Ÿæ¶æ„

### 2.1 å®Œæ•´æ•°æ®ç®¡é“

```
Audience (å—ä¼—å®šä¹‰)
   â†“
Keyword (å…³é”®è¯åº“, ç²—ç­›)             â† å‡å°‘ embedding æˆæœ¬, é™ä½å™ªå£°
   â†“
Raw Content (å¤šæºåŸå§‹å†…å®¹)
   â†“
Filtered Content (å…³é”®è¯è¿‡æ»¤å)
   â†“
Embedding (å‘é‡åŒ–)                   â† åˆå¹¶åŒä¹‰è¡¨è¾¾, åˆå¹¶é‡å¤è®¨è®º, é˜²æ­¢çˆ†è¯åˆ·å±
   â†“
Deduplication (è¯­ä¹‰å»é‡)
   â†“
Topic Cluster (è¯é¢˜èšç±», çƒ­ç‚¹ç”Ÿæˆ)
   â†“
Content Ideas (å†…å®¹åˆ›æ„è¾“å‡º)
```

### 2.2 è®¾è®¡åŸç†

| é˜¶æ®µ | æŠ€æœ¯ | ç›®çš„ |
|------|------|------|
| **å…³é”®è¯ç²—ç­›** | æ­£åˆ™åŒ¹é… | å¿«é€Ÿè¿‡æ»¤æ— å…³å†…å®¹ï¼Œå‡å°‘ä¸‹æ¸¸ embedding è°ƒç”¨é‡ï¼ŒèŠ‚çœæˆæœ¬ |
| **å‘é‡åŒ– + å»é‡** | OpenAI embedding / sentence-transformers + ä½™å¼¦ç›¸ä¼¼åº¦ | åˆå¹¶åŒä¹‰è¡¨è¾¾ï¼ˆå¦‚ "FBA fees" ä¸ "Amazon fulfillment cost"ï¼‰ï¼Œæ¶ˆé™¤é‡å¤å¸–å­ |
| **è¯é¢˜èšç±»** | HDBSCAN / KMeans | è‡ªåŠ¨å‘ç°çƒ­ç‚¹è¯é¢˜æ–¹å‘ï¼Œä¸éœ€è¦é¢„å®šä¹‰è¯é¢˜æ•°é‡ |
| **å†…å®¹ç”Ÿæˆ** | GPT-4o | å°†è¯é¢˜ç°‡è½¬åŒ–ä¸ºå¯ç›´æ¥ä½¿ç”¨çš„å†…å®¹åˆ›æ„ |

---

## ä¸‰ã€å—ä¼—çŸ©é˜µï¼ˆ8 å¤§å—ä¼—ç¾¤ä½“ï¼‰

| ID | å—ä¼— | è¯´æ˜ | æ ¸å¿ƒå…³é”®è¯æ•° |
|----|------|------|-------------|
| `fba_beginner` | FBA æ–°æ‰‹å–å®¶ | åˆšå…¥é—¨æˆ–ç ”ç©¶ FBA çš„æ–°æ‰‹ | 17 |
| `fba_operator` | FBA è¿è¥å–å®¶ | å·²åœ¨è¿è¥ï¼Œå…³æ³¨ä¼˜åŒ–å¢é•¿ | 19 |
| `ppc_specialist` | PPC å¹¿å‘Šä¸“å®¶ | ä¸“æ³¨å¹¿å‘ŠæŠ•æ”¾ä¼˜åŒ– | 20 |
| `brand_owner` | å“ç‰Œå–å®¶ | è‡ªæœ‰å“ç‰Œã€å“ç‰Œå»ºè®¾ | 18 |
| `wholesale_reseller` | æ‰¹å‘/è½¬å”®å–å®¶ | æ‰¹å‘é‡‡è´­æˆ–å¥—åˆ© | 16 |
| `international_seller` | è·¨å¢ƒå–å®¶ | å¤šç«™ç‚¹/è·¨å¢ƒè¿è¥ | 17 |
| `policy_watcher` | æ”¿ç­–å…³æ³¨è€… | å…³æ³¨æ”¿ç­–å˜æ›´å’Œè´¹ç”¨è°ƒæ•´ | 17 |
| `tools_user` | å·¥å…·ç”¨æˆ· | ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·è¾…åŠ©è¿è¥ | 18 |

---

## å››ã€æ•°æ®æºè¯¦è§£

### 4.1 YouTube Data API v3

- **è·å–å†…å®¹**ï¼šæœç´¢åŒ¹é…å…³é”®è¯çš„è¿‘ä¸€å‘¨è§†é¢‘
- **æ•°æ®å­—æ®µ**ï¼šæ ‡é¢˜ã€æè¿°ã€é¢‘é“ã€è§‚çœ‹æ•°ã€ç‚¹èµæ•°ã€è¯„è®ºæ•°
- **é…é¢**ï¼šå…è´¹ 10,000 units/å¤©ï¼Œæ¯æ¬¡ search = 100 units
- **ä»·å€¼**ï¼šYouTube æ˜¯ Amazon Seller æœ€ä¸»è¦çš„å­¦ä¹ æ¸ é“

### 4.2 Reddit (PRAW)

- **ç›®æ ‡ Subreddit**ï¼šr/AmazonSeller, r/FulfillmentByAmazon, r/AmazonFBA, r/ecommerce ç­‰
- **æ•°æ®å­—æ®µ**ï¼šæ ‡é¢˜ã€æ­£æ–‡ã€è¯„åˆ†ã€è¯„è®ºæ•°ã€ä½œè€…
- **ä»·å€¼**ï¼šçœŸå®å–å®¶çš„è®¨è®ºå’Œç—›ç‚¹ï¼Œåæ˜ æœ€æ¥åœ°æ°”çš„éœ€æ±‚

### 4.3 RSS / è¡Œä¸šåšå®¢

- **æ•°æ®æº**ï¼šJungle Scoutã€Helium 10ã€SellerAppã€Feedvisor ç­‰å¤´éƒ¨åšå®¢
- **æ•°æ®å­—æ®µ**ï¼šæ ‡é¢˜ã€æ­£æ–‡ã€å‘å¸ƒæ—¶é—´ã€æ ‡ç­¾
- **ä»·å€¼**ï¼šä¸“ä¸šæ´å¯Ÿå’Œæ·±åº¦åˆ†æå†…å®¹

### 4.4 Google Trends

- **æ•°æ®ç±»å‹**ï¼šç›¸å…³æŸ¥è¯¢ (rising/top)ã€ç›¸å…³è¯é¢˜
- **ä»·å€¼**ï¼šå‘ç°æ–°å…´æœç´¢è¶‹åŠ¿ï¼ŒéªŒè¯è¯é¢˜çƒ­åº¦

---

## äº”ã€å†…å®¹è¾“å‡ºæ ¼å¼

### 5.1 å›¾æ–‡/åšå®¢æ–‡æ¡ˆ (`article`)
- SEO å‹å¥½æ ‡é¢˜å’Œå‰¯æ ‡é¢˜
- å¼€å¤´é’©å­æ®µè½
- 5-7 ä¸ªç« èŠ‚å¤§çº² + è¦ç‚¹
- å…³é”®è¦ç‚¹æ€»ç»“
- CTA å’Œ SEO å…³é”®è¯

### 5.2 çŸ­è§†é¢‘è„šæœ¬ (`short_video`)
- 60 ç§’ YouTube Shorts / TikTok / Reels è„šæœ¬
- Hook â†’ Problem â†’ Solution â†’ CTA ç»“æ„
- å±å¹•æ–‡å­—å åŠ å»ºè®®
- B-roll ç”»é¢å»ºè®®
- å°é¢æ¦‚å¿µ + è¯é¢˜æ ‡ç­¾

### 5.3 é•¿è§†é¢‘è„šæœ¬ (`long_video`)
- 8-12 åˆ†é’Ÿ YouTube è§†é¢‘å®Œæ•´è„šæœ¬
- åˆ†æ®µæ—¶é—´æˆ³ç»“æ„
- æ¯æ®µè¯æœ¯è¦ç‚¹ + ç”»é¢å»ºè®®
- SEO ä¼˜åŒ–çš„æ ‡é¢˜/æè¿°/æ ‡ç­¾
- å°é¢è®¾è®¡å»ºè®® + ç‰‡å°¾ç­–ç•¥

### 5.4 AI å›¾ç‰‡ Prompt (`image_prompt`)
- 5 å¼ å›¾ç‰‡çš„ç”Ÿæˆ Promptï¼ˆMidjourney / DALL-E / SDï¼‰
- é€‚ç”¨åœºæ™¯ï¼šå°é¢ã€åšå®¢å¤´å›¾ã€ç¤¾äº¤åª’ä½“ã€ä¿¡æ¯å›¾ã€è½®æ’­
- åŒ…å«é£æ ¼ã€ç¯å…‰ã€æ„å›¾ã€è‰²å½©ã€æƒ…ç»ªæè¿°
- Negative Prompt + æ¯”ä¾‹å»ºè®®

### 5.5 ç¤¾äº¤åª’ä½“å¸–å­ (`social_post`)
- Twitter/X çº¿ç¨‹ï¼ˆ5-7 æ¡æ¨æ–‡ï¼‰
- LinkedIn é•¿æ–‡
- Facebook ç¾¤ç»„å¸–å­
- Instagram è½®æ’­å›¾ï¼ˆ8-10 é¡µæ–‡æ¡ˆï¼‰

---

## å…­ã€å¿«é€Ÿå¼€å§‹

### 6.1 ç¯å¢ƒå‡†å¤‡

```bash
cd amazon-seller-content-engine
pip install -r requirements.txt
```

### 6.2 é…ç½® API Key

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶å¡«å†™ï¼š

```bash
cp .env.example .env
```

```
OPENAI_API_KEY=sk-xxxxx        # å¿…éœ€ï¼ˆç”¨äº embedding + å†…å®¹ç”Ÿæˆï¼‰
YOUTUBE_API_KEY=AIzaxxxxx      # å¯é€‰ï¼ˆYouTube æŠ“å–ï¼‰
REDDIT_CLIENT_ID=xxxxx         # å¯é€‰ï¼ˆReddit æŠ“å–ï¼‰
REDDIT_CLIENT_SECRET=xxxxx     # å¯é€‰ï¼ˆReddit æŠ“å–ï¼‰
```

> å¦‚æœåªé…ç½® OpenAI Keyï¼Œç³»ç»Ÿä¼šè·³è¿‡ YouTube å’Œ Reddit æŠ“å–ï¼Œä»å¯ä½¿ç”¨ RSS å’Œ Google Trendsã€‚

### 6.3 è¿è¡Œ

```bash
# åŸºæœ¬è¿è¡Œï¼ˆé»˜è®¤å—ä¼—: FBAæ–°æ‰‹å–å®¶ï¼‰
python run.py

# æŒ‡å®šå—ä¼—
python run.py --audience fba_operator

# æ‰€æœ‰å—ä¼—
python run.py --audience all

# åªæŠ“å–+èšç±»ï¼Œä¸ç”Ÿæˆå†…å®¹ï¼ˆæµ‹è¯•ç”¨ï¼‰
python run.py --dry-run

# æŒ‡å®šè¾“å‡ºæ ¼å¼
python run.py -a ppc_specialist -f short_video,image_prompt

# è°ƒè¯•æ¨¡å¼
python run.py --log-level DEBUG
```

### 6.4 è¾“å‡º

ç”Ÿæˆçš„å†…å®¹ä¼šä¿å­˜åœ¨ `output/` ç›®å½•ï¼ŒæŒ‰æ—¶é—´æˆ³+å—ä¼—+æ ¼å¼å‘½åï¼š

```
output/
â”œâ”€â”€ 20260218_103000_fba_beginner_article_topic0_1.md
â”œâ”€â”€ 20260218_103000_fba_beginner_short_video_topic0_2.md
â”œâ”€â”€ 20260218_103000_fba_beginner_long_video_topic0_3.md
â”œâ”€â”€ 20260218_103000_fba_beginner_image_prompt_topic0_4.md
â”œâ”€â”€ 20260218_103000_fba_beginner_social_post_topic0_5.md
â””â”€â”€ 20260218_103000_all_ideas.json
```

---

## ä¸ƒã€æ ¸å¿ƒç­–ç•¥è¯´æ˜

### 7.1 ä¸ºä»€ä¹ˆå…ˆç”¨å…³é”®è¯å†ç”¨å‘é‡ï¼Ÿ

```
å…¨é‡å†…å®¹
  â†“ å…³é”®è¯ç²—ç­›ï¼ˆæˆæœ¬â‰ˆ0ï¼Œé€Ÿåº¦æå¿«ï¼‰
è¿‡æ»¤åå†…å®¹ï¼ˆçº¦å‡å°‘ 60-80%ï¼‰
  â†“ å‘é‡åŒ–ï¼ˆæœ‰æˆæœ¬ï¼ŒOpenAI embedding æŒ‰ token è®¡è´¹ï¼‰
  â†“ è¯­ä¹‰å»é‡ï¼ˆåˆå¹¶åŒä¹‰è¯ã€é‡å¤å¸–å­ï¼‰
å»é‡åå†…å®¹ï¼ˆå†å‡å°‘ 10-30%ï¼‰
  â†“ èšç±»
è¯é¢˜ç°‡
```

- **å…³é”®è¯åšçš„äº‹**ï¼šå‡å°‘ embedding æˆæœ¬ã€é™ä½å™ªå£°
- **å‘é‡åšçš„äº‹**ï¼šåˆå¹¶åŒä¹‰è¡¨è¾¾ã€åˆå¹¶é‡å¤è®¨è®ºã€é˜²æ­¢çˆ†è¯é‡å¤åˆ·å±

å¦‚æœè·³è¿‡å…³é”®è¯ç›´æ¥å‘é‡åŒ–ï¼Œå¯¹ 10,000 æ¡å†…å®¹å…¨éƒ¨è°ƒç”¨ embedding APIï¼Œæˆæœ¬å’Œå»¶è¿Ÿéƒ½ä¼šå¤§å¹…å¢åŠ ï¼Œè€Œä¸”ä¼šå¼•å…¥å¤§é‡ä¸ç›¸å…³å†…å®¹çš„å™ªå£°ã€‚

### 7.2 HDBSCAN vs KMeans

| | HDBSCAN | KMeans |
|---|---|---|
| æ˜¯å¦éœ€è¦é¢„è®¾ç°‡æ•° | å¦ï¼ˆè‡ªåŠ¨å‘ç°ï¼‰ | æ˜¯ |
| å¤„ç†å™ªå£° | æœ‰å™ªå£°ç‚¹æ ‡è®° | å¼ºåˆ¶å½’ç±» |
| é€‚åˆåœºæ™¯ | æ•°æ®åˆ†å¸ƒæœªçŸ¥ | æ•°æ®é‡å¤§ä¸”åˆ†å¸ƒå‡åŒ€ |
| æ¨è | âœ… é¦–é€‰ | å¤‡é€‰ |

### 7.3 æˆæœ¬ä¼°ç®—

ä»¥å•æ¬¡è¿è¡Œï¼ˆ1 ä¸ªå—ä¼—ï¼Œtop 10 è¯é¢˜ï¼Œ5 ç§æ ¼å¼ï¼‰ä¸ºä¾‹ï¼š

| ç»„ä»¶ | ä¼°ç®—æˆæœ¬ |
|------|---------|
| YouTube API | $0ï¼ˆå…è´¹é…é¢å†…ï¼‰ |
| Reddit API | $0ï¼ˆå…è´¹ï¼‰ |
| RSS | $0ï¼ˆå…è´¹ï¼‰ |
| Google Trends | $0ï¼ˆå…è´¹ï¼‰ |
| OpenAI Embedding (500 æ¡ Ã— ~200 tokens) | ~$0.01 |
| GPT-4o ç”Ÿæˆ (10 è¯é¢˜ Ã— 5 æ ¼å¼ = 50 æ¬¡) | ~$2-5 |
| **å•æ¬¡æ€»è®¡** | **~$2-5** |

---

## å…«ã€é¡¹ç›®ç»“æ„

```
amazon-seller-content-engine/
â”œâ”€â”€ config.yaml                 # å…¨å±€é…ç½®
â”œâ”€â”€ .env.example                # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ requirements.txt            # Python ä¾èµ–
â”œâ”€â”€ run.py                      # å¿«é€Ÿå¯åŠ¨å…¥å£
â”œâ”€â”€ README.md                   # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # ä¸»æµç¨‹ç¼–æ’
â”‚   â”œâ”€â”€ audiences.py            # å—ä¼—å®šä¹‰ & å…³é”®è¯åº“
â”‚   â”‚
â”‚   â”œâ”€â”€ scrapers/               # æ•°æ®æŠ“å–æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ base.py             # åŸºç±» & RawContent æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ youtube.py          # YouTube Data API v3
â”‚   â”‚   â”œâ”€â”€ reddit.py           # Reddit (PRAW)
â”‚   â”‚   â”œâ”€â”€ rss_scraper.py      # RSS / åšå®¢
â”‚   â”‚   â””â”€â”€ google_trends.py    # Google Trends
â”‚   â”‚
â”‚   â”œâ”€â”€ pipeline/               # å¤„ç†ç®¡é“
â”‚   â”‚   â”œâ”€â”€ keyword_filter.py   # â‘  å…³é”®è¯ç²—ç­›
â”‚   â”‚   â”œâ”€â”€ embeddings.py       # â‘¡ å‘é‡åŒ–
â”‚   â”‚   â”œâ”€â”€ dedup.py            # â‘¡ è¯­ä¹‰å»é‡
â”‚   â”‚   â””â”€â”€ clustering.py       # â‘¢ è¯é¢˜èšç±»
â”‚   â”‚
â”‚   â”œâ”€â”€ generator/              # å†…å®¹ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ content_ideas.py    # åˆ›æ„ç”Ÿæˆå™¨
â”‚   â”‚   â””â”€â”€ templates.py        # Prompt æ¨¡æ¿åº“
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ helpers.py          # å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ output/                     # ç”Ÿæˆçš„å†…å®¹è¾“å‡º
â”œâ”€â”€ data/                       # ç¼“å­˜çš„ä¸­é—´æ•°æ®
â”‚
â”œâ”€â”€ api/                        # ğŸŒ FastAPI åç«¯
â”‚   â”œâ”€â”€ main.py                 # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ database.py             # Supabase/PostgreSQL è¿æ¥é…ç½®
â”‚   â”œâ”€â”€ models.py               # æ•°æ®åº“æ¨¡å‹ (5 å¼ è¡¨ + pgvector)
â”‚   â”œâ”€â”€ schemas.py              # Pydantic è¯·æ±‚/å“åº”æ¨¡å‹
â”‚   â”œâ”€â”€ supabase_client.py      # Supabase Python Client å°è£…
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ dashboard.py        # Dashboard æ¦‚è§ˆ API
â”‚   â”‚   â”œâ”€â”€ audiences.py        # å—ä¼—ç®¡ç† API
â”‚   â”‚   â”œâ”€â”€ jobs.py             # æŠ“å–ä»»åŠ¡ API (åå°è¿è¡Œ)
â”‚   â”‚   â”œâ”€â”€ topics.py           # è¯é¢˜ç°‡ + è¯­ä¹‰æœç´¢ API
â”‚   â”‚   â””â”€â”€ content.py          # å†…å®¹åˆ›æ„ API
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ pipeline_service.py # ç®¡é“æœåŠ¡ (å°è£…å®Œæ•´æµç¨‹)
â”‚       â””â”€â”€ vector_store.py     # pgvector å‘é‡å­˜å‚¨æœåŠ¡
â”‚
â”œâ”€â”€ supabase/                   # ğŸ—„ï¸ Supabase é…ç½®
â”‚   â””â”€â”€ migrations/
â”‚       â””â”€â”€ 001_init.sql        # å»ºè¡¨ + pgvector + è¯­ä¹‰æœç´¢å‡½æ•°
â”‚
â””â”€â”€ web/                        # ğŸ¨ Next.js å‰ç«¯
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ layout.tsx          # å…¨å±€å¸ƒå±€ (ä¾§è¾¹æ )
    â”‚   â”œâ”€â”€ page.tsx            # Dashboard é¦–é¡µ
    â”‚   â”œâ”€â”€ audiences/page.tsx  # å—ä¼—ç®¡ç†é¡µ
    â”‚   â”œâ”€â”€ jobs/page.tsx       # æŠ“å–ä»»åŠ¡é¡µ
    â”‚   â”œâ”€â”€ topics/page.tsx     # è¯é¢˜çƒ­ç‚¹é¡µ
    â”‚   â””â”€â”€ ideas/page.tsx      # å†…å®¹åˆ›æ„æµè§ˆå™¨
    â”œâ”€â”€ components/             # é€šç”¨ç»„ä»¶
    â””â”€â”€ lib/api.ts              # API å®¢æˆ·ç«¯
```

---

## ä¹ã€Web ç‰ˆå¯åŠ¨æ–¹å¼

### 9.1 åç«¯ (FastAPI)

```bash
cd amazon-seller-content-engine
pip install -r requirements.txt

# å¯åŠ¨åç«¯ï¼ˆç«¯å£ 8000ï¼Œè‡ªåŠ¨å»ºè¡¨ï¼‰
uvicorn api.main:app --reload --port 8000
```

åç«¯å¯åŠ¨åè®¿é—®ï¼š
- API æ–‡æ¡£ï¼šhttp://localhost:8000/docs
- ReDocï¼šhttp://localhost:8000/redoc

### 9.2 å‰ç«¯ (Next.js)

```bash
cd web
npm install
npm run dev
```

å‰ç«¯å¯åŠ¨åè®¿é—®ï¼šhttp://localhost:3000

### 9.3 Supabase æ•°æ®åº“é…ç½®

#### æ­¥éª¤ 1ï¼šåˆ›å»º Supabase é¡¹ç›®

1. è®¿é—® [supabase.com](https://supabase.com) æ³¨å†Œ/ç™»å½•
2. ç‚¹å‡» **New Project**ï¼Œé€‰æ‹©åŒºåŸŸï¼ˆå»ºè®® `us-east-1` æˆ–ç¦»ä½ æœ€è¿‘çš„ï¼‰
3. è®¾ç½®æ•°æ®åº“å¯†ç ï¼ˆè®°ä¸‹æ¥ï¼‰

#### æ­¥éª¤ 2ï¼šè¿è¡Œå»ºè¡¨ SQL

1. è¿›å…¥ Supabase Dashboard â†’ **SQL Editor**
2. ç‚¹å‡» **New Query**
3. å¤åˆ¶ `supabase/migrations/001_init.sql` çš„å…¨éƒ¨å†…å®¹ç²˜è´´è¿›å»
4. ç‚¹å‡» **Run** â€” ä¼šåˆ›å»º 5 å¼ è¡¨ + pgvector æ‰©å±• + è¯­ä¹‰æœç´¢å‡½æ•°

#### æ­¥éª¤ 3ï¼šè·å–è¿æ¥ä¿¡æ¯

è¿›å…¥ **Settings â†’ Database**ï¼š

| ä¿¡æ¯ | ä½ç½® | å¯¹åº”ç¯å¢ƒå˜é‡ |
|------|------|-------------|
| Connection string (URI) | Database â†’ Connection string â†’ URI | `SUPABASE_DB_URL` |
| Project URL | API â†’ Project URL | `SUPABASE_URL` |
| anon public key | API â†’ anon public | `SUPABASE_ANON_KEY` |
| service_role key | API â†’ service_role | `SUPABASE_SERVICE_ROLE_KEY` |

> **æ³¨æ„**ï¼šConnection string é€‰æ‹© **Transaction** æ¨¡å¼ (port 6543)ï¼Œä¸è¦é€‰ Session æ¨¡å¼ã€‚

#### æ­¥éª¤ 4ï¼šé…ç½® .env

```bash
cp .env.example .env
```

å¡«å…¥ä½ çš„å¯†é’¥ï¼š

```
OPENAI_API_KEY=sk-xxxxx
SUPABASE_DB_URL=postgresql://postgres.[ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres
SUPABASE_URL=https://[ref].supabase.co
SUPABASE_ANON_KEY=eyJxxxxx
```

#### æ•°æ®åº“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  audiences   â”‚â”€â”€â”€â”€â†’â”‚  scrape_jobs â”‚â”€â”€â”€â”€â†’â”‚   contents   â”‚
â”‚              â”‚     â”‚              â”‚     â”‚  + embedding  â”‚ â† pgvector (1536ç»´)
â”‚ id           â”‚     â”‚ id           â”‚     â”‚  (vector)     â”‚
â”‚ name         â”‚     â”‚ audience_id  â”‚     â”‚              â”‚
â”‚ keywords[]   â”‚     â”‚ status       â”‚     â”‚ content_hash â”‚
â”‚ subreddits[] â”‚     â”‚ total_*      â”‚     â”‚ source       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ title/body   â”‚
                            â”‚             â”‚ engagement   â”‚
                            â”‚             â”‚ cluster_id â”€â”€â”‚â”€â”€â†’â”
                            â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                            â”‚                                â”‚
                            â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
                            â”œâ”€â”€â”€â”€â†’â”‚ topic_clusters  â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚     â”‚ label           â”‚
                            â”‚     â”‚ size            â”‚
                            â”‚     â”‚ top_titles[]    â”‚
                            â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚             â”‚
                            â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â””â”€â”€â”€â”€â†’â”‚ content_ideas   â”‚
                                  â”‚ format_type     â”‚
                                  â”‚ topic_label     â”‚
                                  â”‚ generated_contentâ”‚
                                  â”‚ is_favorite     â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å‘é‡æœç´¢è¯´æ˜

Supabase å†…ç½® **pgvector** æ‰©å±•ï¼Œæœ¬é¡¹ç›®åˆ©ç”¨å®ƒå®ç°ï¼š

| åŠŸèƒ½ | å®ç°æ–¹å¼ |
|------|---------|
| å†…å®¹ embedding å­˜å‚¨ | `contents.embedding` åˆ— (`vector(1536)`) |
| è¯­ä¹‰å»é‡ | ä½™å¼¦è·ç¦» `<=>` è¿ç®—ç¬¦ï¼Œé˜ˆå€¼ 0.88 |
| è¯­ä¹‰æœç´¢ | `POST /api/topics/search/semantic` |
| æ•°æ®åº“å†…æ£€ç´¢ | `match_contents()` SQL å‡½æ•° |
| ç´¢å¼•åŠ é€Ÿ | IVFFlat ç´¢å¼•ï¼ˆæ•°æ® >1000 æ¡åå¯ç”¨ï¼‰ |

### 9.4 API ç«¯ç‚¹åˆ—è¡¨

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/health` | å¥åº·æ£€æŸ¥ï¼ˆå«æ•°æ®åº“ç±»å‹ï¼‰ |
| GET | `/api/dashboard/stats` | Dashboard æ¦‚è§ˆæ•°æ® |
| GET | `/api/audiences/` | åˆ—å‡ºæ‰€æœ‰å—ä¼— |
| PUT | `/api/audiences/{id}` | æ›´æ–°å—ä¼— |
| POST | `/api/jobs/` | åˆ›å»ºæŠ“å–ä»»åŠ¡ï¼ˆåå°è¿è¡Œï¼‰ |
| GET | `/api/jobs/` | åˆ—å‡ºä»»åŠ¡å†å² |
| GET | `/api/topics/` | åˆ—å‡ºè¯é¢˜ç°‡ |
| GET | `/api/topics/{id}/contents` | è·å–è¯é¢˜ä¸‹çš„å†…å®¹ |
| POST | `/api/topics/search/semantic` | **è¯­ä¹‰æœç´¢** (pgvector) |
| GET | `/api/ideas/` | åˆ—å‡ºå†…å®¹åˆ›æ„ï¼ˆæ”¯æŒè¿‡æ»¤ï¼‰ |
| PATCH | `/api/ideas/{id}` | æ›´æ–°åˆ›æ„ï¼ˆæ”¶è—/å‘å¸ƒ/ç¬”è®°ï¼‰ |
| GET | `/api/ideas/formats/available` | å¯ç”¨çš„å†…å®¹æ ¼å¼ |

---

## åã€Supabase å…è´¹é¢åº¦å‚è€ƒ

| èµ„æº | å…è´¹é¢åº¦ | æœ¬é¡¹ç›®é¢„ä¼°ç”¨é‡ |
|------|---------|---------------|
| æ•°æ®åº“å­˜å‚¨ | 500 MB | ~50MB / 1000 æ¬¡ä»»åŠ¡ |
| æ•°æ®åº“å¸¦å®½ | 5 GB / æœˆ | ~200MB / æœˆ |
| API è¯·æ±‚ | æ— é™ | â€” |
| Edge Functions | 50 ä¸‡æ¬¡ / æœˆ | æŒ‰éœ€ |
| Auth ç”¨æˆ· | 5 ä¸‡ MAU | æŒ‰éœ€ |
| Storage | 1 GB | æŒ‰éœ€ |

> å¯¹äºä¸ªäºº/å°å›¢é˜Ÿä½¿ç”¨ï¼Œå…è´¹é¢åº¦ç»°ç»°æœ‰ä½™ã€‚

---

## åä¸€ã€æ‰©å±•æ–¹å‘

1. **å¢åŠ æ•°æ®æº**ï¼šTwitter/X APIã€Amazon è®ºå›çˆ¬è™«ã€Podcast RSS
2. **å®šæ—¶è¿è¡Œ**ï¼šSupabase Cron (pg_cron) / Celery Beat æ¯æ—¥è‡ªåŠ¨æ‰§è¡Œ
3. **å¤šè¯­è¨€æ”¯æŒ**ï¼šä¸­æ–‡/æ—¥æ–‡/å¾·æ–‡å—ä¼— + æœ¬åœ°åŒ–å†…å®¹ç”Ÿæˆ
4. **å†…å®¹æ—¥å†**ï¼šè‡ªåŠ¨æ’æœŸï¼Œè¾“å‡ºåˆ° Notion / Google Calendar
5. **A/B æ ‡é¢˜æµ‹è¯•**ï¼šä¸ºæ¯ä¸ªè¯é¢˜ç”Ÿæˆå¤šç»„æ ‡é¢˜ï¼Œä¾›å¯¹æ¯”æµ‹è¯•
6. **ç«å“ç›‘æ§**ï¼šè¿½è¸ªç‰¹å®š YouTube é¢‘é“æˆ–åšå®¢çš„å†…å®¹åŠ¨æ€
7. **Docker éƒ¨ç½²**ï¼šä¸€é”® docker-compose up å¯åŠ¨å…¨æ ˆ
8. **ç”¨æˆ·ç³»ç»Ÿ**ï¼šSupabase Auth é›†æˆï¼Œå¤šç”¨æˆ·ã€å›¢é˜Ÿåä½œ
9. **Realtime**ï¼šSupabase Realtime è®¢é˜…ä»»åŠ¡çŠ¶æ€å˜åŒ–
10. **HNSW ç´¢å¼•**ï¼šæ•°æ®é‡å¤§åä» IVFFlat å‡çº§ä¸º HNSW æå‡å¬å›ç‡
